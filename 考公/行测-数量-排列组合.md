# 错题
## 基础排列组合

![[Pasted image 20250206162108.png]]
注意：不少于1小时，意味着 只选一项时，自行车、划船、慢跑 不符合条件

![[Pasted image 20250206161359.png]]
分三种情况讨论
- 3 0 0 A31
- 2 1 0 A33
- 1 1 1 A11
![[Pasted image 20250206161541.png]]

![[Pasted image 20250206160049.png]]
![[Pasted image 20250206160316.png]]
对条件的翻译
各位数字之和为6，却各位的数字不同，推出 各个位的值只能是 0 1 2 3
三个连续的值相加得到一个4位数字，且 后两位不超过20，推出百位要大于4
之后分类讨论

![[Pasted image 20250206155015.png]]
![[Pasted image 20250206155102.png]]

![[Pasted image 20250206153403.png]]
### 哪里少了6种
以人为维度来分情况讨论
怎么少了6个？

![[Pasted image 20250206153427.png]]

![[Pasted image 20250206154352.png]]
以最明确的条件为条件分类
按照工作类型，依次从人堆里挑选合适的分配

## 相邻问题

![[Pasted image 20250207162110.png]]


### 环形排列？
![[Pasted image 20250207163824.png]]
果然做错了
![[Pasted image 20250207164100.png]]
![[Pasted image 20250207164201.png]]
为什么是这个思路？
符合条件数目/总数目 怎么考虑
总数目：A10 10
符合条件的数目：两两绑定，插入5个空中？不行，上图是按照这个思路来的，结果不对。
这样？ 先两两捆绑，第1对夫妇10个位置中选一个坐下（这里为什么不考虑哪对夫妇，即C51），剩余4对在4组位置排列
![[Pasted image 20250207165310.png]]
### 组合问题中：人 和 位置，一样 和 不一样，两两组合对题目何有影响


![[Pasted image 20250207163204.png]]

![[Pasted image 20250207163342.png]]

## 不相邻问题

![[Pasted image 20250208104349.png]]
![[Pasted image 20250208104621.png]]
不懂，什么意思
总的情况数为什么是C(12,3)呢？——因为不考虑连续，只是选出来，12个选3个人出来就行，220种。
三个不相邻，先选出三个相邻的数字，然后插入到剩余的空中，这样能保证一定不连续？但是为什么第一步选相邻数字时，不C11 1 呢，三个连续数字组有11中情况，之后再插入到10个空中？——错误，不是这么理解的
这样理解：首先位置分为两组，一组是不相邻不可以相邻的位置，另一组是可以相邻的位置，我们的目标是从不相邻位置中取值，例如12个位置，3个不相邻位置，9个可相邻位置，最终从不相邻位置取数字。
9个位置出现9+1个空，将3个不相邻的位置插入到9+1个空中，有C(10,3)种（因为位置都相同，不考虑排序），即120种。

三个数字不相邻的概率是，120/220=6/11
至少有两个数字相邻的概率，1-6/11=5/11
### 不相邻组合公式：链不相邻 C(m-n+1,n)，环不相邻C(m-n-1,n-1)
[【组合数学】不相邻问题 - 知乎 (zhihu.com)](https://zhuanlan.zhihu.com/p/473677996)
[不相邻问题插空法_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1g7411K7at/?spm_id_from=333.1391.0.0)


![[Pasted image 20250208102002.png]]
方法1：方向思路、捆绑、排序
方法2：插空
![[Pasted image 20250208115746.png]]

![[Pasted image 20250208102302.png]]
捆绑、排序
注意同类型租户间要间隔，不止水果店，也包括餐厅！
![[Pasted image 20250208120938.png]]
![[Pasted image 20250208121035.png]]

![[Pasted image 20250208121318.png]]
![[Pasted image 20250208121329.png]]
？不会做
有出入，跟解析对不上
![[Pasted image 20250208122829.png]]

![[Pasted image 20250208104242.png]]
3男1女时，男生必然连续，所以B不对
![[Pasted image 20250208142130.png]]
![[Pasted image 20250208142209.png]]

## 同素分堆

![[Pasted image 20250208145740.png]]
![[Pasted image 20250208145810.png]]
为什么不这么考虑——每人先分配3个任务，剩11个任务，12个空，2个板子，可以重复插入相同位置，即12 * 12 = 144？
先后插板子是有顺序的，是排序，相对于组合 是有重复的，以下是举例
![[Pasted image 20250208151203.png]]
### 不可为0情况，采用不可重合插入的情况，即每人至少要分配一个的情况；而不是可为零的情况。

### 可为0情况，星与条公式 C(m+n-1, n-1)
但是这种问题怎么解决呢？5个球分配给3个人，可以有人没有球，有多少种分配方式？
deepseek解答：
将5个相同的球分配给3个不同的人，允许有人不拿球，可以使用**星与条**（Stars and Bars）方法解决。该问题的本质是求非负整数解的数目，满足方程 \(a + b + c = 5\)（其中\(a, b, c\)分别表示三人分到的球数）。
根据组合数学公式，分配方式数为：
![[Pasted image 20250208152749.png]]
其中，\(n = 5\)（球的数量），\(k = 3\)（人数）。代入得：
![[Pasted image 20250208152737.png]]
**验证过程**：
1. **列举所有可能的分配组合**：
   - \((5,0,0)\) 有3种排列。
   - \((4,1,0)\) 有6种排列。
   - \((3,2,0)\) 有6种排列。
   - \((3,1,1)\) 有3种排列。
   - \((2,2,1)\) 有3种排列。
   - 总计 \(3 + 6 + 6 + 3 + 3 = 21\) 种。
   ![[Pasted image 20250208153250.png]]
因此，分配方式共有 **21种**。

![[Pasted image 20250208153831.png]]
![[Pasted image 20250208153900.png]]

![[Pasted image 20250208144638.png]]
![[Pasted image 20250208153941.png]]

![[Pasted image 20250208144753.png]]
![[Pasted image 20250208154013.png]]

![[Pasted image 20250208154458.png]]
解的分组，再排序
![[Pasted image 20250208155008.png]]
正向枚举
![[Pasted image 20250208155238.png]]

## 环形排列
![[Pasted image 20250210101913.png]]
并不好理解
![[Pasted image 20250210101854.png]]
![[Pasted image 20250210101822.png]]
你怎么知道之后剩余3人一定只有一种安排方式呢？
如果是7个人，不是6个人呢？

![[Pasted image 20250210103800.png]]
不是插空，而是选座位，不要想混了
100个位置小李做一个，剩下99个位置，小张的选择只有2个，所以是2/99
![[Pasted image 20250210103810.png]]
### 环形全排列公式 A(n-1, n-1)

![[Pasted image 20250210104509.png]]
![[Pasted image 20250210104525.png]]
方法1：小孩排列，大人插入
方法2：大人捆绑，大人小孩全排列，最后取反
方法3：忽略小孩，大人捆绑坐一起的概率，取反
位置不同，人不同，先大人1挑一个坐 6，大人2做旁边2，总情况数大人1坐6，大人2坐5
6x2/6x5=2/5

![[Pasted image 20250210105723.png]]
![[Pasted image 20250210105737.png]]
注意，孩子都要挨着母亲做，即全排列不是A(9,9)，而是$A(4,4)*2^5$，孩子全部不相邻的情况是$A(4,4)*2$，概率为1/16

![[Pasted image 20250210110334.png]]
![[Pasted image 20250210110357.png]]

## 错位重排
![[Pasted image 20250210174850.png]]
![[Pasted image 20250210174902.png]]
### 错位重排公式 $D_{n}=(n-1)(D_{n-1}+D_{n-2})$ $D_{1}=0,D_{2}=1,D_{3}=2,D_{4}=9,D_{5}=44$ 
![[Pasted image 20250210180833.png]]
[这可能是全网最透彻的【错排】讲解！排列组合_哔哩哔哩_bilibili](https://www.bilibili.com/video/BV1N24y1g79R/?spm_id_from=333.337.search-card.all.click)

![[Pasted image 20250210175237.png]]
![[Pasted image 20250210175245.png]]

## 其他
![[Pasted image 20250210183624.png]]
好题
![[Pasted image 20250210183608.png]]
### 单循环比赛 $C(n,2)$
User: 足球比赛中，什么是单循环比赛，如果有5支球队，则要比多少次赛
Kimi: 1. **单循环比赛的概念**
     * 在足球比赛中，单循环比赛是指参赛的每个队均需和其他队各比赛一次。这种赛制能够让所有参赛队伍之间都有直接的交锋机会，比较公平地反映出各队的实力对比。
  1. **计算 5 支球队单循环比赛的场次**
     * 当有 5 支球队进行单循环比赛时，可以用组合数学的方法来计算比赛场次。每个队都要和其他 4 个队各比赛一次。
     * 设这 5 支球队分别为 A、B、C、D、E。对于球队 A，它要分别与 B、C、D、E 比赛，共 4 场；球队 B 除了与 A 比赛外，还要与 C、D、E 比赛，也是 4 场，但 A 和 B 的比赛已经计算过一次，不能重复计算。
     * 总的比赛场次可以用组合公式 \(C(n, 2) = \frac{n(n - 1)}{2}\) 来计算，其中 n 是球队的数量。在这里，\(n = 5\)，所以比赛场次为 \(\frac{5 \times 4}{2} = 10\) 场。
特征：每只球队都要进行n-1场比赛，所有球队总比赛场数为C(n-1,2)
有两种结果（胜负场、平局场，而不是三种：胜、负、平，胜负在一局都产生）
- 胜负场：有胜、又有负，产生3分
- 平局场：各得1分，产生2分

![[Pasted image 20250210182209.png]]
![[Pasted image 20250210184032.png]]

![[Pasted image 20250210184050.png]]
![[Pasted image 20250210184438.png]]
每人同不相邻同学喝一杯：意思是可以重复？A找C 与 C找A 是要算两次，而不是一次？

如果说将 A找C 与 C找A 看作是一次，那结果是多少？

![[Pasted image 20250210184530.png]]
这个题没有思路
奇怪的题目
为什么按照每人购买的数量分类讨论，是因为题目中“任意2名顾客购买的橡皮块数不同”的限制吗？
![[Pasted image 20250210185427.png]]

![[Pasted image 20250210185628.png]]
啊？解析啥意思
这样会重复吧，怎么保证不重复呢？——换个角度理解，看后边解释
握手不重复，小于等于9时，本身就能保证不重复
![[Pasted image 20250210185720.png]]
每个人都要与其他8人握手，总出手次数为 10 x 8=80，完成握手次数为 80/2=40

如果改为9次，那就是单循环比赛，每个人都与其他人都握一次，每个人都握了9次手，转化为组合问题 10个里调2个的组合有多少C(10,2)
![[Pasted image 20250210191952.png]]

现在将9次改回8此，那么可以理解为在9次的基础上，每人都少出一次手，共少10次，一次握手需要两只手，所以共少握10/2=5次手，45-5=40
区分概念
- 单人：出手
- 两人：握手
- 握手=2个单人出1次手